# Todo

This is a preliminary list of things missing in psx (which is almost everything...)

- [ ] GPU
    - [x] Textures
        - [x] Basic support
        - [x] Finish textured primitives
    - [ ] VRAM to CPU via DMA
    - [ ] Framebuffer
        - [x] Variable video mode, interlacing and color depth
    - [x] Depth ordering tables
    - [ ] Timers
    - [ ] draw_quad with logical vertex ordering
- [ ] GTE
    - [ ] Add coprocessor 2 asm snippets
- [ ] MDEC
- [ ] SPU
- [ ] Interrupts
    - [ ] Fix ack for IRQ1..3, 7..10
    - [ ] Add relevant coprocessor 0 asm snippets
- [ ] DMA
    - [x] Finish GPU channel
    - [x] Add other channels
    - [ ] Integrate with interrupts
- [ ] Timers
- [ ] CDROM/ISO
    - [ ] Via kernel
    - [ ] Via MMIO
- [ ] Controllers
- [ ] Memory cards
- [ ] BIOS
    - [ ] Threads
    - [ ] Try inlining bios asm trampolines
- [ ] allocator
    - [ ] Test collections (use GNU ld for now)
    - [ ] Fix linker error for `alloc` crate with rust-lld
- [ ] Pretty Panic
    - [ ] Make printing panic messages a config option since it adds a whole 10 KB (even with LTO)
- [ ] Unzip
    - [ ] Making TIM take a mutable array broke my lazy macros :( Fix this
    - [ ] Add tests (for x86) to verify that future commits don't break macros
    - [ ] Streaming decompression
        - [ ] Design the GPU pipeline first to see if this fits in somewhere
- [ ] TIM parser
    - [x] Test CLUTs
    - [ ] Make DMA TIM loader non-blocking
- [ ] Check if any `volatile_*` need a `compiler_fence` (see embedonomicon DMA chapter)
